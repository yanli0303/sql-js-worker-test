<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IndexedDB + sql.js + Worker</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.0/codemirror.css">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header class="center-align">
  <h3>sql.js + Worker + IndexedDB</h5>
    <p>
      CPU usage, RAM usage, IndexedDB as storage, and FTS search tests
      against sql.js using Workers
    </p>
</header>
<div class="row">
  <ul class="tabs">
    <li class="tab col s3"><a class="active" href="#action-open">OPEN</a></li>
    <li class="tab col s3"><a href="#action-exec-sql">EXEC SQL</a></li>
    <li class="tab col s3"><a href="#action-insert">INSERT</a></li>
    <li class="tab col s3"><a href="#action-match">MATCH</a></li>
    <li class="tab col s3"><a href="#action-clear">CLEAR</a></li>
  </ul>
  <tab class="col s12" id="action-open">
    <ol>
      <li>Load sql.js library in worker - one time only;</li>
      <li>Creates SQLite database;</li>
      <li>Load data from IndexedDB if any.</li>
    </ol>
    <footer class="center-align">
      <button class="waves-effect waves-light btn blue" id="btn-open">OPEN
        SQLITE
        DATABASE IN WORKER</button>
    </footer>
  </tab>
  <div class="col s12" id="action-exec-sql">
    <p>Execute SQL entered below and show results.</p>
    <textarea id="txt-exec-sql" placeholder="Enter SQL here..."></textarea>
    <footer class="center-align">
      <a class="dropdown-trigger btn" href='#'
        data-target='ddl-select-sql'>SELECT SQL</a>
      <ul id="ddl-select-sql" class="dropdown-content">
        <li><a href="#!" data-type="create-table">CREATE TABLE</a></li>
        <li><a href="#!" data-type="select-star">SELECT * FROM</a></li>
        <li><a href="#!" data-type="select-count">SELECT COUNT(*)</a></li>
      </ul>
      <button class="waves-effect waves-light btn blue" id="btn-exec-sql">EXEC
        SQL</button>
    </footer>
  </div>
  <div class="col s12" id="action-insert">
    <p>Insert into table <code>one_million</code>.</p>
    <footer class="center-align">
      <button class="waves-effect waves-light btn orange"
        id="btn-insert-10">INSERT
        10K</button>
      <button class="waves-effect waves-light btn red"
        id="btn-insert-100">INSERT
        100K</button>
    </footer>
  </div>
  <div class="col s12" id="action-match">
    <textarea id='ta-match-text'
      placeholder="Enter any text here..."></textarea>
    <footer class="center-align">
      <button class="waves-effect waves-light btn blue"
        id="btn-match-whole">MATCH
        WHOLE</button>
      <button class="waves-effect waves-light btn cyan"
        id="btn-match-cross-join">MATCH
        LINE BY LINE</button>
    </footer>
  </div>
  <div class="col s12" id="action-clear">
    <ol>
      <li>Close SQLite database;</li>
      <li>Erase SQLite database from memory;</li>
      <li>Delete IndexedDB database.</li>
    </ol>
    <footer class="center-align">
      <button class="waves-effect waves-light btn red"
        id="btn-clear">CLEAR</button>
    </footer>
  </div>
</div>
<div class="container center-align">
  <div class="row">
    <div id="error" class="col s12"></div>
  </div>
  <div class="row">
    <button type="button" class="waves-effect waves-light btn red"
      id="clear-output"><i class="material-icons left">delete_sweep</i>Clear
      Outputs</button>
  </div>
  <div class="row">
    <div class="col s12">
      <pre id="output" class="left-align"></pre>
    </div>
  </div>
</div>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.0/codemirror.js">
</script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.0/mode/sql/sql.min.js">
</script>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js">
</script>
<script src="main.js"></script>
</body>
</html>
